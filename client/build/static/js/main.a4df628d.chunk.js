(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r(27),n=r.n(c),s=r(8),i=r(28),j=Object(i.b)({name:"setProductList",initialState:{loading:!1,products:[],error:""},reducers:{requestProductList:function(e,t){return{loading:!0,products:[],error:""}},setProductList:function(e,t){return{loading:!1,products:t.payload,error:""}},failProductList:function(e,t){return{loading:!1,products:[],error:t.payload}}}}),o=Object(i.b)({name:"setProduct",initialState:{loading:!1,product:{rating:0,numReviews:0},error:""},reducers:{requestProduct:function(e,t){e.loading=!0},setProduct:function(e,t){return{loading:!1,product:t.payload}},failProduct:function(e,t){e.error=t.payload}}}),l=localStorage.getItem("cart"),d=localStorage.getItem("shipping"),u={cart:l?JSON.parse(l):[],loading:!1,error:"",shipping:d?JSON.parse(d):{},payment:""},b=Object(i.b)({name:"setCart",initialState:u,reducers:{fetchItem:function(e,t){e.loading=!0},addToCart:function(e,t){e.loading=!1;var r=t.payload;if(e.cart.find((function(e){return e.id===r.id}))){var a=e.cart.map((function(e){return e.id===r.id?r:e}));e.cart=a}else e.cart.push(r)},failFetch:function(e,t){e.loading=!1,e.error=t.payload},removeFromCart:function(e,t){var r=t.payload;if(e.cart.find((function(e){return e.id===r}))){var a=e.cart.filter((function(e){return e.id!==r}));e.cart=a,localStorage.setItem("cart",JSON.stringify(a))}},addShipping:function(e,t){e.shipping=t.payload,localStorage.setItem("shipping",JSON.stringify(t.payload))},addPayment:function(e,t){e.payment=t.payload},clearCart:function(e,t){e.cart=[],localStorage.clear("cart")}}}),O=localStorage.getItem("user"),h={loading:!1,user:O?JSON.parse(O):null,success:!1,error:""},x=Object(i.b)({name:"setUserLogin",initialState:h,reducers:{requestUser:function(e,t){e.loading=!0,e.success=!1},setUser:function(e,t){return{loading:!1,user:t.payload,success:!0}},failUser:function(e,t){e.error=t.payload,e.loading=!1,e.success=!1},logout:function(e,t){return localStorage.clear("user"),{loading:!1,error:null,user:null}},resetSuccess:function(e,t){e.success=!1}}}),p=Object(i.b)({name:"setOrder",initialState:{loading:!1,order:{_id:null},orders:[],success:!1,error:""},reducers:{requestOrder:function(e,t){e.loading=!0},setOrder:function(e,t){e.loading=!1,e.order=t.payload,e.success=!0},setOrders:function(e,t){e.loading=!1,e.orders=t.payload,e.success=!0},failOrder:function(e,t){e.error=t.payload,e.loading=!1,e.success=!1},resetOrders:function(e,t){({loading:!1,order:{_id:null},orders:[],success:!1,error:""})},resetSuccess:function(e,t){e.success=!1},resetOrder:function(e,t){e.order={_id:null}}}}),m=Object(i.a)({reducer:{productList:j.reducer,product:o.reducer,cart:b.reducer,user:x.reducer,orders:p.reducer}}),f=j.actions,g=o.actions,y=b.actions,v=x.actions,S=p.actions,C=m,N=(r(96),r(97),r(10)),k=r.n(N),L=r(19),P=r(6),w=r(13),I=r(7),E=r(17),D=r.n(E),T=r(60),q=r(129),A=r(137),R=r(140),B=r(136),G=r(26),U=r(0),F=function(){var e=Object(s.c)((function(e){return e.user})).user,t=Object(s.b)(),r=Object(I.t)();return Object(U.jsx)("header",{children:Object(U.jsx)(A.a,{bg:"dark",variant:"dark",expand:"sm",collapseOnSelect:!0,children:Object(U.jsxs)(q.a,{children:[Object(U.jsx)(G.LinkContainer,{to:"/",children:Object(U.jsx)(A.a.Brand,{children:"Proshop"})}),Object(U.jsx)(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(U.jsx)(A.a.Collapse,{id:"basic-navbar-nav",children:Object(U.jsxs)(R.a,{className:"ms-auto",children:[Object(U.jsx)(G.LinkContainer,{to:"/cart",children:Object(U.jsxs)(R.a.Link,{children:[Object(U.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})}),e?Object(U.jsxs)(B.a,{title:e.name,id:"basic-nav-dropdown",children:[Object(U.jsx)(G.LinkContainer,{to:"/profile",children:Object(U.jsx)(B.a.Item,{children:"Profile"})}),Object(U.jsx)(B.a.Item,{onClick:function(){t(S.resetOrders()),t(v.logout()),r("/")},children:"Logout"})]}):Object(U.jsx)(G.LinkContainer,{to:"/login",children:Object(U.jsxs)(R.a.Link,{children:[Object(U.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})})]})})})},_=r(130),J=r(84),$=function(){return Object(U.jsx)("footer",{children:Object(U.jsx)(q.a,{children:Object(U.jsx)(_.a,{children:Object(U.jsx)(J.a,{className:"text-center py-3",children:"Copyright \xa9"})})})})},Q=function(){return function(){var e=Object(L.a)(k.a.mark((function e(t){var r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(f.requestProductList()),e.next=4,D.a.get("/api/products");case 4:r=e.sent,a=r.data,t(f.setProductList(a)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t(f.failProductList(c));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},M=r(131),H=function(){return Object(U.jsx)(M.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"}})},V=r(132),z=function(e){var t=e.variant,r=e.children;return Object(U.jsx)(V.a,{variant:t,children:r})};z.defaultProps={variant:"info"};var K=z,W=r(139),X=function(e){var t=e.value,r=e.text,a=e.color;return Object(U.jsxs)("div",{className:"rating",children:[Object(U.jsx)("span",{children:Object(U.jsx)("i",{style:{color:a},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(U.jsx)("span",{children:Object(U.jsx)("i",{style:{color:a},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(U.jsx)("span",{children:Object(U.jsx)("i",{style:{color:a},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(U.jsx)("span",{children:Object(U.jsx)("i",{style:{color:a},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(U.jsx)("span",{children:Object(U.jsx)("i",{style:{color:a},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(U.jsx)("span",{className:"ms-2",children:r&&r})]})};X.defaultProps={color:"#f8e825"};var Y=X,Z=function(e){var t=e.product;return Object(U.jsxs)(W.a,{className:"my-3 p-3 rounded",children:[Object(U.jsx)(w.Link,{to:"/product/".concat(t._id),children:Object(U.jsx)(W.a.Img,{src:t.image,variant:"top"})}),Object(U.jsxs)(W.a.Body,{children:[Object(U.jsx)(w.Link,{to:"/product/".concat(t._id),style:{textDecoration:"none"},children:Object(U.jsx)(W.a.Title,{as:"div",children:Object(U.jsx)("strong",{children:t.name})})}),Object(U.jsx)(W.a.Text,{as:"div",children:Object(U.jsx)("div",{className:"my-3",children:Object(U.jsx)(Y,{value:t.rating,text:"".concat(t.numReviews," reviews")})})}),Object(U.jsxs)(W.a.Text,{as:"h4",children:["$",t.price]})]})]})},ee=function(){var e=Object(s.b)();Object(a.useEffect)((function(){e(Q())}),[e]);var t=Object(s.c)((function(e){return e.productList})),r=t.products,c=t.loading,n=t.error;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("h1",{children:"Latest Products"}),c?Object(U.jsx)(H,{}):n?Object(U.jsx)(K,{variant:"danger",children:n}):Object(U.jsx)(_.a,{children:r.map((function(e){return Object(U.jsx)(J.a,{sm:12,md:6,lg:4,xl:3,children:Object(U.jsx)(Z,{product:e})},e._id)}))})]})},te=function(e){return function(){var t=Object(L.a)(k.a.mark((function t(r){var a,c,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(g.requestProduct()),t.next=4,D.a.get("/api/products/".concat(e));case 4:a=t.sent,c=a.data,r(g.setProduct(c)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,r(g.failProduct(n));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},re=r(83),ae=r(133),ce=r(134),ne=r(85),se=r(40),ie=r(138),je=function(e){var t=e.product,r=e.productQuantity,a=e.productQuantityHandler;return Object(U.jsx)(ie.a.Control,{as:"select",value:r,onChange:a,className:"py-1",style:{height:"1.6rem",lineHeight:"1.2rem",textAlign:"center"},children:Object(se.a)(Array(t.countInStock).keys()).map((function(e){return Object(U.jsx)("option",{value:e+1,children:e+1},e+1)}))})},oe=function(){var e=Object(I.x)().id,t=Object(s.b)(),r=Object(a.useState)(1),c=Object(P.a)(r,2),n=c[0],i=c[1];Object(a.useEffect)((function(){t(te(e))}),[t,e]);var j=Object(s.c)((function(e){return e.product})),o=j.product,l=j.loading,d=j.error,u=o&&o.countInStock>0;return Object(U.jsx)(U.Fragment,{children:l?Object(U.jsx)(H,{}):d?Object(U.jsx)(K,{variant:"danger"}):Object(U.jsxs)(_.a,{className:"justify-content-center",children:[Object(U.jsx)(J.a,{children:Object(U.jsx)(G.LinkContainer,{to:"/",children:Object(U.jsx)(re.a,{variant:"light",children:"Go Back"})})}),Object(U.jsxs)(_.a,{className:"my-3",children:[Object(U.jsx)(J.a,{md:6,children:Object(U.jsx)(ae.a,{src:o.image,alt:o.name,fluid:!0})}),Object(U.jsxs)(J.a,{className:"mt-sm-3 mt-md-0",md:6,children:[Object(U.jsxs)(ce.a,{variant:"flush",style:{gridGap:"10px"},children:[Object(U.jsx)(ne.a,{children:Object(U.jsx)("h4",{children:o.name})}),Object(U.jsx)(ne.a,{children:Object(U.jsx)(Y,{value:o.rating,text:"".concat(o.numReviews," reviews")})}),Object(U.jsxs)(ne.a,{children:["Price: $",o.price]}),Object(U.jsx)(ne.a,{children:o.description})]}),Object(U.jsx)(_.a,{className:"justify-content-start ms-1 mt-3",children:Object(U.jsx)(J.a,{xs:"auto",children:Object(U.jsx)(W.a,{children:Object(U.jsxs)(ce.a,{variant:"flush",children:[Object(U.jsx)(ne.a,{children:Object(U.jsxs)(_.a,{children:[Object(U.jsx)(J.a,{children:"Price:"}),Object(U.jsx)(J.a,{className:"text-end",children:Object(U.jsxs)("strong",{children:["$",o.price]})})]})}),Object(U.jsx)(ne.a,{children:Object(U.jsxs)(_.a,{children:[Object(U.jsx)(J.a,{children:"Status:"}),Object(U.jsx)(J.a,{className:"text-end",xs:"auto",children:u?"In Stock":"Out of Stock"})]})}),Object(U.jsx)(ne.a,{children:u&&Object(U.jsxs)(_.a,{children:[Object(U.jsx)(J.a,{children:"Quantity:"}),Object(U.jsx)(J.a,{children:Object(U.jsx)(je,{product:o,productQuantity:n,productQuantityHandler:function(e){i(e.target.value)}})})]})}),Object(U.jsx)(ne.a,{children:Object(U.jsx)(_.a,{className:"justify-content-center",children:Object(U.jsx)(G.LinkContainer,{to:"/cart/".concat(e,"?quantity=").concat(n),className:"mx-3 my-2",style:{width:"10rem"},children:Object(U.jsx)(re.a,{disabled:!u,variant:"dark",children:"Add to Cart"})})})})]})})})})]})]})]})})},le=r(2),de=function(e,t){return function(){var r=Object(L.a)(k.a.mark((function r(a,c){var n,s,i,j,o;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(y.fetchItem()),r.next=4,D.a.get("/api/products/".concat(e));case 4:n=r.sent,s=n.data,i={id:e,quantity:t,name:s.name,image:s.image,price:s.price,countInStock:s.countInStock},a(y.addToCart(i)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),j=r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message,a(y.failFetch(j));case 14:o=c().cart.cart,localStorage.setItem("cart",JSON.stringify(o));case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}()},ue=function(){var e=Object(s.b)(),t=Object(I.t)(),r=Object(w.useSearchParams)()[0],c=Object(I.x)().id,n=r.get("quantity"),i=Object(s.c)((function(e){return e.cart.cart})),j=Object(s.c)((function(e){return e.user.user}));Object(a.useEffect)((function(){c&&e(de(c,n))}),[e,c,n]);var o=function(t,r){e(y.addToCart(Object(le.a)(Object(le.a)({},t),{},{quantity:r.target.value})))},l=function(t){e(y.removeFromCart(t))};return Object(U.jsxs)(_.a,{style:{justifyContent:"end"},children:[Object(U.jsxs)(J.a,{lg:8,children:[Object(U.jsx)("h1",{children:"Shopping Cart"}),0===i.length&&Object(U.jsxs)(K,{children:["Shopping Cart is Empty",Object(U.jsx)(w.Link,{to:"/",style:{textDecoration:"none",float:"right"},children:"Go Back"})]}),i.length>0&&Object(U.jsx)(ce.a,{variant:"flush",children:i.map((function(e){return Object(U.jsx)(ne.a,{children:Object(U.jsxs)(_.a,{style:{gridGap:"0.6rem"},className:"flex-column flex-md-row",children:[Object(U.jsx)(J.a,{md:3,children:Object(U.jsx)(ae.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(U.jsx)(J.a,{children:Object(U.jsx)(_.a,{style:{height:"100%",alignItems:"center"},children:Object(U.jsx)(J.a,{className:"text-center text-md-start",children:e.name})})}),Object(U.jsx)(J.a,{children:Object(U.jsx)(_.a,{style:{height:"100%",alignItems:"center"},children:Object(U.jsxs)(J.a,{style:{textAlign:"center"},children:["$",e.price]})})}),Object(U.jsx)(J.a,{xs:4,md:2,className:"mx-auto",children:Object(U.jsx)(_.a,{style:{height:"100%",alignItems:"center"},children:Object(U.jsx)(J.a,{style:{textAlign:"center"},children:Object(U.jsx)(je,{product:e,productQuantity:e.quantity,productQuantityHandler:o.bind(null,e)})})})}),Object(U.jsx)(J.a,{xs:4,md:2,className:"mx-auto",children:Object(U.jsx)(_.a,{style:{height:"100%",alignItems:"center"},children:Object(U.jsx)(re.a,{onClick:l.bind(null,e.id),variant:"light",children:Object(U.jsx)("i",{className:"fas fa-trash"})})})})]})},e.id)}))})]}),Object(U.jsx)(J.a,{md:6,lg:4,className:"mt-5",children:Object(U.jsx)(W.a,{children:Object(U.jsxs)(ce.a,{variant:"flush",children:[Object(U.jsxs)(ne.a,{children:[Object(U.jsxs)("h4",{style:{textAlign:"center"},children:["Subtotal (",i.reduce((function(e,t){return e+parseInt(t.quantity)}),0),") Items"]}),Object(U.jsxs)("div",{style:{textAlign:"center"},children:["$",i.reduce((function(e,t){return e+parseFloat(t.quantity)*parseFloat(t.price)}),0).toLocaleString()]})]}),Object(U.jsx)(ne.a,{children:Object(U.jsx)(re.a,{style:{display:"block"},className:"mx-auto",variant:"primary",onClick:function(){t(j?"/shipping":"/login")},disabled:0===i.length,children:"To Checkout"})})]})})})]})},be=function(e,t){return function(){var r=Object(L.a)(k.a.mark((function r(a){var c,n,s,i;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(v.requestUser()),c={headers:{"Content-Type":"application/json"}},r.next=5,D.a.post("/api/users/login",{email:e,password:t},c);case 5:n=r.sent,s=n.data,a(v.setUser(s)),localStorage.setItem("user",JSON.stringify(s)),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),i=r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message,a(v.failUser(i));case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()},Oe=function(e){var t=e.children;return Object(U.jsx)(q.a,{children:Object(U.jsx)(_.a,{className:"justify-content-md-center",children:Object(U.jsx)(J.a,{xs:12,md:6,children:t})})})},he=function(){var e=Object(a.useState)(""),t=Object(P.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(""),i=Object(P.a)(n,2),j=i[0],o=i[1],l=Object(s.b)(),d=Object(I.t)(),u=Object(s.c)((function(e){return e.user})),b=u.loading,O=u.user,h=u.error;Object(a.useEffect)((function(){O&&d("/")}),[O,d]);return Object(U.jsxs)(Oe,{children:[h&&Object(U.jsx)(K,{variant:"danger",children:h}),b&&Object(U.jsx)(H,{}),Object(U.jsxs)(ie.a,{onSubmit:function(e){e.preventDefault(),l(be(r,j))},children:[Object(U.jsx)("h1",{children:"Sign in"}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(U.jsx)(ie.a.Label,{children:"Email address"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return c(e.target.value)},value:r,type:"email",placeholder:"Enter email"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(U.jsx)(ie.a.Label,{children:"Password"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return o(e.target.value)},value:j,type:"password",placeholder:"Enter password"})]}),Object(U.jsx)(re.a,{className:"mb-3",type:"submit",variant:"primary",children:"Sign In"})]}),Object(U.jsxs)("p",{children:["New User? ",Object(U.jsx)(w.Link,{to:"/register",children:"Register"})]})]})},xe=function(e,t,r){return function(){var a=Object(L.a)(k.a.mark((function a(c){var n,s,i,j;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(v.requestUser()),n={headers:{"Content-Type":"application/json"}},a.next=5,D.a.post("/api/users",{name:e,email:t,password:r},n);case 5:s=a.sent,i=s.data,c(v.setUser(i)),localStorage.setItem("user",JSON.stringify(i)),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),j=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,c(v.failUser(j));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},pe=function(){var e=Object(a.useState)(""),t=Object(P.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(""),i=Object(P.a)(n,2),j=i[0],o=i[1],l=Object(a.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1],O=Object(a.useState)(""),h=Object(P.a)(O,2),x=h[0],p=h[1],m=Object(a.useState)(""),f=Object(P.a)(m,2),g=f[0],y=f[1],v=Object(s.b)(),S=Object(I.t)(),C=Object(s.c)((function(e){return e.user})),N=C.loading,k=C.user,L=C.error;Object(a.useEffect)((function(){k&&S("/")}),[k,S]);return Object(U.jsxs)(Oe,{children:[L&&Object(U.jsx)(K,{variant:"danger",children:L}),g&&Object(U.jsx)(K,{variant:"danger",children:g}),N&&Object(U.jsx)(H,{}),Object(U.jsxs)(ie.a,{onSubmit:function(e){e.preventDefault(),u!==x?y("Passwords do not match"):(g&&y(null),v(xe(r,j,u)))},children:[Object(U.jsx)("h1",{children:"Register"}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicText",children:[Object(U.jsx)(ie.a.Label,{children:"Name"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return c(e.target.value)},value:r,type:"text",placeholder:"Enter name"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(U.jsx)(ie.a.Label,{children:"Email address"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return o(e.target.value)},value:j,type:"email",placeholder:"Enter email"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(U.jsx)(ie.a.Label,{children:"Password"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return b(e.target.value)},value:u,type:"password",placeholder:"Enter password"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicRepeatPassword",children:[Object(U.jsx)(ie.a.Label,{children:"Repeat Password"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return p(e.target.value)},value:x,type:"password",placeholder:"Repeat password"})]}),Object(U.jsx)(re.a,{className:"mb-3",type:"submit",variant:"primary",children:"Register"})]}),Object(U.jsxs)("p",{children:["Already have an account? ",Object(U.jsx)(w.Link,{to:"/login",children:"Log in"})]})]})},me=r(135),fe=function(e,t,r){return function(){var a=Object(L.a)(k.a.mark((function a(c,n){var s,i,j,o,l;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(v.requestUser()),s=n().user.user.token,i={headers:{"Content-Type":"application/json",Authorization:"Bearer: ".concat(s)}},a.next=6,D.a.put("/api/users/profile",{name:e,email:t,password:r},i);case 6:j=a.sent,o=j.data,c(v.setUser(o)),localStorage.setItem("user",JSON.stringify(o)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),l=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,c(v.failUser(l));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(L.a)(k.a.mark((function t(r,a){var c,n,s,i,j,o,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r(S.requestOrder()),c=a().user.user.token,n={headers:{"Content-Type":"application/json",Authorization:"Bearer: ".concat(c)}},!e){t.next=12;break}return t.next=7,D.a.get("/api/orders/".concat(e),n);case 7:s=t.sent,i=s.data,r(S.setOrder(i)),t.next=17;break;case 12:return t.next=14,D.a.get("/api/orders/myorders",n);case 14:j=t.sent,o=j.data,r(S.setOrders(o));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,r(S.failOrder(l));case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,r){return t.apply(this,arguments)}}()},ye=function(){var e=Object(a.useState)(""),t=Object(P.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(""),i=Object(P.a)(n,2),j=i[0],o=i[1],l=Object(a.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1],O=Object(a.useState)(""),h=Object(P.a)(O,2),x=h[0],p=h[1],m=Object(a.useState)(""),f=Object(P.a)(m,2),g=f[0],y=f[1],S=Object(s.b)(),C=Object(I.t)(),N=Object(s.c)((function(e){return e.user})),k=N.loading,L=N.user,E=N.success,D=N.error,T=Object(s.c)((function(e){return e.orders})),q=T.loading,A=T.orders,R=T.error;Object(a.useEffect)((function(){L?(c(L.name),o(L.email)):C("/login")}),[L,C]),Object(a.useEffect)((function(){S(v.resetSuccess()),S(ge())}),[S]);return Object(U.jsxs)(_.a,{className:"mx-2",children:[D&&Object(U.jsx)(K,{variant:"danger",children:D}),R&&Object(U.jsx)(K,{variant:"danger",children:R}),g&&Object(U.jsx)(K,{variant:"danger",children:g}),E&&Object(U.jsx)(K,{variant:"success",children:"Profile Updated"}),(k||q)&&Object(U.jsx)(H,{}),Object(U.jsx)(J.a,{md:3,className:"mx-1",children:Object(U.jsxs)(ie.a,{onSubmit:function(e){e.preventDefault(),u!==x?y("Passwords do not match"):(g&&y(null),S(fe(r,j,u)))},children:[Object(U.jsx)("h1",{children:"Profile"}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicText",children:[Object(U.jsx)(ie.a.Label,{children:"Name"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return c(e.target.value)},value:r,type:"text",placeholder:"Enter name"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(U.jsx)(ie.a.Label,{children:"Email address"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return o(e.target.value)},value:j,type:"email",placeholder:"Enter email"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(U.jsx)(ie.a.Label,{children:"Password"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return b(e.target.value)},value:u,type:"password",placeholder:"Enter password"})]}),Object(U.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formBasicRepeatPassword",children:[Object(U.jsx)(ie.a.Label,{children:"Repeat Password"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return p(e.target.value)},value:x,type:"password",placeholder:"Repeat password"})]}),Object(U.jsx)(re.a,{className:"mb-3",type:"submit",variant:"primary",children:"Save"})]})}),Object(U.jsxs)(J.a,{md:8,className:"mx-1",children:[Object(U.jsx)("h1",{children:"My Orders"}),Object(U.jsxs)(me.a,{striped:!0,bordered:!0,responsive:!0,className:"table-sm",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"ID"}),Object(U.jsx)("th",{children:"DATE"}),Object(U.jsx)("th",{children:"TOTAL"}),Object(U.jsx)("th",{children:"PAID"}),Object(U.jsx)("th",{children:"DELIVERED"})]})}),Object(U.jsx)("tbody",{children:A.map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)(w.Link,{to:"/orders/".concat(e._id),children:e._id})}),Object(U.jsx)("td",{children:e.createdAt.substring(0,10)}),Object(U.jsx)("td",{children:e.totalPrice}),Object(U.jsx)("td",{children:"COMPLETED"===e.paymentResult.status?e.paymentResult.paidAt.substring(0,10):"NOT PAID"}),Object(U.jsx)("td",{children:e.isDelivered?"DELIVERED":"NOT DELIVERED"})]},e._id)}))})]})]})]})},ve=function(e){var t=!e.step1,r=!e.step2,a=!e.step3,c=!e.step4;return Object(U.jsxs)(R.a,{className:"justify-content-center mb-4",children:[Object(U.jsx)(G.LinkContainer,{disabled:t,to:"/login",children:Object(U.jsx)(R.a.Link,{children:"Login"})}),Object(U.jsx)(G.LinkContainer,{disabled:r,to:"/shipping",children:Object(U.jsx)(R.a.Link,{children:"Shipping"})}),Object(U.jsx)(G.LinkContainer,{disabled:a,to:"/payment",children:Object(U.jsx)(R.a.Link,{children:"Payment"})}),Object(U.jsx)(G.LinkContainer,{disabled:c,to:"/order",children:Object(U.jsx)(R.a.Link,{children:"Place Order"})})]})},Se=function(){var e=Object(I.t)(),t=Object(s.b)(),r=Object(s.c)((function(e){return e.cart.shipping})),c=Object(a.useState)(r.address),n=Object(P.a)(c,2),i=n[0],j=n[1],o=Object(a.useState)(r.city),l=Object(P.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(r.postalCode),O=Object(P.a)(b,2),h=O[0],x=O[1],p=Object(a.useState)(r.country),m=Object(P.a)(p,2),f=m[0],g=m[1];return Object(U.jsxs)(Oe,{children:[Object(U.jsx)("h1",{className:"my-3",children:"Shipping"}),Object(U.jsx)(ve,{step1:!0,step2:!0}),Object(U.jsxs)(ie.a,{onSubmit:function(r){r.preventDefault();var a={address:i,city:d,postalCode:h,country:f};t(y.addShipping(a)),e("/payment")},children:[Object(U.jsxs)(ie.a.Group,{className:"my-2",children:[Object(U.jsx)(ie.a.Label,{children:"Address"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return j(e.target.value)},value:i,type:"text",placeholder:"Enter Address",required:!0})]}),Object(U.jsxs)(ie.a.Group,{className:"my-2",children:[Object(U.jsx)(ie.a.Label,{children:"City"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return u(e.target.value)},value:d,type:"text",placeholder:"Enter City",required:!0})]}),Object(U.jsxs)(ie.a.Group,{className:"my-2",children:[Object(U.jsx)(ie.a.Label,{children:"Postal Code"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return x(e.target.value)},value:h,type:"text",placeholder:"Enter Postal Code",required:!0})]}),Object(U.jsxs)(ie.a.Group,{className:"my-2",children:[Object(U.jsx)(ie.a.Label,{children:"Country"}),Object(U.jsx)(ie.a.Control,{onChange:function(e){return g(e.target.value)},value:f,type:"text",placeholder:"Enter Country",required:!0})]}),Object(U.jsx)(re.a,{className:"mt-3",type:"submit",variant:"primary",children:"Proceed to Payment"})]})]})},Ce=function(){var e=Object(I.t)(),t=Object(s.b)(),r=Object(a.useState)("Paypal"),c=Object(P.a)(r,2),n=c[0],i=c[1];return Object(U.jsxs)(Oe,{children:[Object(U.jsx)("h1",{className:"my-3",children:"Payment"}),Object(U.jsx)(ve,{step1:!0,step2:!0,step3:!0}),Object(U.jsxs)(ie.a,{onSubmit:function(r){r.preventDefault(),t(y.addPayment(n)),e("/order")},children:[Object(U.jsxs)(ie.a.Group,{className:"mb-3",onChange:function(e){return i(e.target.id)},children:[Object(U.jsx)(ie.a.Label,{children:"Select Payment Method:"}),Object(U.jsx)(ie.a.Check,{type:"radio",label:"Paypal or Credit Card",id:"Paypal",name:"payment"}),Object(U.jsx)(ie.a.Check,{name:"payment",type:"radio",label:"Stripe",id:"Stripe"})]}),Object(U.jsx)(re.a,{type:"submit",variant:"primary",children:"Order"})]})]})},Ne=function(e){return function(){var t=Object(L.a)(k.a.mark((function t(r,a){var c,n,s,i,j;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(S.requestOrder()),c=a().user.user.token,n={headers:{"Content-Type":"application/json",Authorization:"Bearer: ".concat(c)}},t.next=6,D.a.post("/api/orders",e,n);case 6:s=t.sent,i=s.data,r(S.setOrder(i)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),j=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,r(S.failOrder(j));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},ke=function(){var e=Object(I.t)(),t=Object(s.b)(),r=Object(a.useState)(null),c=Object(P.a)(r,2),n=c[0],i=c[1],j=Object(s.c)((function(e){return e.cart})),o=j.cart,l=j.payment,d=j.shipping,u=Object(s.c)((function(e){return e.orders})),b=u.order._id,O=u.success,h=u.error;Object(a.useEffect)((function(){return t(S.resetSuccess()),function(){t(S.resetOrder())}}),[t]);Object(a.useEffect)((function(){b&&O&&e("/orders/summary/".concat(b))}),[e,O,b]);var x=o.reduce((function(e,t){return e+Number(t.price)*Number(t.quantity)}),0),p=x>100?0:8.99,m=(.2*x).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),f=(x+p).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2});return Object(U.jsxs)(_.a,{children:[h&&Object(U.jsx)(K,{variant:"danger",children:h}),Object(U.jsx)(ve,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(U.jsx)(J.a,{md:8,children:Object(U.jsxs)(ce.a,{variant:"flush",children:[Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Shipping"}),Object(U.jsxs)("p",{children:[Object(U.jsx)("strong",{children:"Address:"})," ",d.address,", ",d.city,","," ",d.postalCode,", ",d.country]})]}),Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Payment"}),Object(U.jsxs)("p",{children:[Object(U.jsx)("strong",{children:"Payment Method:"})," ",l]})]}),Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Order"}),o.length>0?o.map((function(e){return Object(U.jsx)(ce.a,{variant:"flush",children:Object(U.jsx)(ne.a,{children:Object(U.jsxs)(_.a,{className:"flex-column justify-content-center flex-sm-row align-items-sm-center",children:[Object(U.jsx)(J.a,{xs:6,sm:4,md:3,children:Object(U.jsx)(ae.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(U.jsxs)(J.a,{children:[Object(U.jsx)(J.a,{xs:"auto",children:Object(U.jsx)(w.Link,{to:"/product/".concat(e.id),children:Object(U.jsx)("strong",{children:e.name})})}),Object(U.jsxs)(J.a,{xs:"auto",children:["Price: $",e.price.toLocaleString()]}),Object(U.jsxs)(J.a,{xs:"auto",children:["Quantity: ",e.quantity]}),Object(U.jsxs)(J.a,{xs:"auto",children:[Object(U.jsx)("strong",{children:"Total: "}),(e.price*e.quantity).toLocaleString()]})]})]})})},e.id)})):Object(U.jsx)("p",{children:'"No items in Cart"'})]})]})}),Object(U.jsxs)(J.a,{md:4,children:[Object(U.jsx)("h2",{children:"Order Summary"}),Object(U.jsxs)(ce.a,{children:[Object(U.jsxs)(ne.a,{children:["Items: $",x.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})]}),Object(U.jsxs)(ne.a,{children:["Shipping: $",p]}),Object(U.jsxs)(ne.a,{children:["VAT: $",m]}),Object(U.jsxs)(ne.a,{children:["Total: $",f]})]}),Object(U.jsx)(ce.a,{className:"mt-3",children:Object(U.jsx)(T.a,{createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{value:f}}]}).then((function(e){return e}))},onApprove:function(e,t){i(t.order.capture())}})}),Object(U.jsx)(re.a,{variant:"primary",onClick:function(){var e={cart:o,payment:l,shipping:d,itemsPrice:x,shippingPrice:p,taxPrice:m,totalPrice:f};n&&(e.paymentResult=n.value),t(Ne(e))},style:{display:"block",marginLeft:"auto"},className:"mt-3",disabled:!n,children:"Place Order"})]})]})},Le=function(){var e=Object(s.b)(),t=Object(I.x)(),r=t.summary,c=t.id,n=Object(s.c)((function(e){return e.orders})),i=n.order,j=n.error,o=n.loading;return Object(a.useEffect)((function(){e(S.resetSuccess()),e(y.clearCart()),e(S.resetOrder())}),[e]),Object(a.useEffect)((function(){e(ge(c))}),[e,c]),Object(U.jsxs)(_.a,{children:[j&&Object(U.jsx)(K,{variant:"danger",children:j}),o&&Object(U.jsx)(H,{}),r&&i.paymentResult&&"COMPLETED"===i.paymentResult.status&&Object(U.jsx)(K,{variant:"success",children:"Thanks for your order!"}),i._id&&"COMPLETED"===i.paymentResult.status?Object(U.jsx)(J.a,{md:8,children:Object(U.jsxs)(ce.a,{variant:"flush",children:[Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Order"}),Object(U.jsxs)("p",{children:[Object(U.jsx)("strong",{children:"Order Id:"})," ",i._id]})]}),Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Delivery"}),Object(U.jsxs)("p",{children:[i.shipping.address,", ",i.shipping.city,","," ",i.shipping.postalCode,", ",i.shipping.country]})]}),Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Payment"}),Object(U.jsxs)("p",{children:[Object(U.jsx)("strong",{children:"Payment Method:"})," ",i.payment]})]}),Object(U.jsxs)(ce.a.Item,{children:[Object(U.jsx)("h2",{children:"Items"}),i.cart.length>0&&i.cart.map((function(e){return Object(U.jsx)(ce.a,{variant:"flush",children:Object(U.jsx)(ne.a,{children:Object(U.jsxs)(_.a,{className:"flex-column justify-content-center flex-sm-row align-items-sm-center",children:[Object(U.jsx)(J.a,{xs:6,sm:4,md:3,children:Object(U.jsx)(ae.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(U.jsxs)(J.a,{children:[Object(U.jsx)(J.a,{xs:"auto",children:Object(U.jsx)(w.Link,{to:"/product/".concat(e.id),children:Object(U.jsx)("strong",{children:e.name})})}),Object(U.jsxs)(J.a,{xs:"auto",children:["Price: $",e.price.toLocaleString()]}),Object(U.jsxs)(J.a,{xs:"auto",children:["Quantity: ",e.quantity]}),Object(U.jsxs)(J.a,{xs:"auto",children:[Object(U.jsx)("strong",{children:"Total: "}),(e.price*e.quantity).toLocaleString()]})]})]})})},e.id)}))]})]})}):Object(U.jsx)(K,{variant:"danger",children:"Oops, something went wrong"})]})},Pe=function(){var e=Object(a.useState)("test"),t=Object(P.a)(e,2),r=t[0],c=t[1],n=function(){var e=Object(L.a)(k.a.mark((function e(){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/api/config/paypal");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n().then((function(e){c(e)}))}),[]),Object(U.jsx)(T.b,{options:{"client-id":r},children:Object(U.jsxs)(w.BrowserRouter,{children:[Object(U.jsx)(F,{}),Object(U.jsx)("main",{className:"py-3",children:Object(U.jsx)(q.a,{children:Object(U.jsxs)(I.f,{children:[Object(U.jsx)(I.d,{path:"login",element:Object(U.jsx)(he,{})}),Object(U.jsx)(I.d,{path:"register",element:Object(U.jsx)(pe,{})}),Object(U.jsx)(I.d,{path:"profile",element:Object(U.jsx)(ye,{})}),Object(U.jsx)(I.d,{path:"product/:id",element:Object(U.jsx)(oe,{})}),Object(U.jsx)(I.d,{path:"cart",element:Object(U.jsx)(ue,{}),children:Object(U.jsx)(I.d,{path:":id",element:Object(U.jsx)(ue,{})})}),Object(U.jsx)(I.d,{path:"shipping",element:Object(U.jsx)(Se,{})}),Object(U.jsx)(I.d,{path:"payment",element:Object(U.jsx)(Ce,{})}),Object(U.jsx)(I.d,{path:"order",element:Object(U.jsx)(ke,{})}),Object(U.jsx)(I.d,{path:"orders/:summary/:id",element:Object(U.jsx)(Le,{})}),Object(U.jsx)(I.d,{path:"orders/:id",element:Object(U.jsx)(Le,{})}),Object(U.jsx)(I.d,{path:"",element:Object(U.jsx)(ee,{}),exact:!0})]})})}),Object(U.jsx)($,{})]})})};n.a.render(Object(U.jsx)(s.a,{store:C,children:Object(U.jsx)(Pe,{})}),document.getElementById("root"))},96:function(e,t,r){},97:function(e,t,r){}},[[123,1,2]]]);
//# sourceMappingURL=main.a4df628d.chunk.js.map